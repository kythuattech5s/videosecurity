<?php $name = FCHelper::er($table,'name');$default_code = FCHelper::er($table,'default_code');$default_code = json_decode($default_code,true);$default_code = @$default_code?$default_code:array();$value ="";if($actionType=='edit'||$actionType=='copy'){		$value = FCHelper::er($dataItem,$name);		$_value = json_decode($value,true);	} ?><div class="form-group">	<input type="hidden" value="{{$value}}" name="{{$name}}">	<div class="group-answers group-answers{{$name}} clearfix">		@if(($actionType=='edit'||$actionType=='copy')&& @$_value && is_array($_value))			@for($i=0;$i<count($_value["data"]);$i++)			<?php $tmp = $_value["data"][$i]; ?>				<div class="answer-item col-xs-12">					<p><strong>Đáp án:	<span>{{$i+1}}</span></strong>Câu hỏi đúng: <span type="radio" class="true_answer{{$name}} {{$_value['exact']==$i?'active':''}}"></span></p>					<textarea  class="sub-answer-item">{{$tmp or ''}}</textarea>					<span onclick='removeAnswer{{$name}}(this);return false;' class='answer-item-trash fa fa-trash'></span>				</div>			@endfor		@else		<div class="answer-item col-xs-12">			<p><strong>Đáp án:	<span>1</span></strong>Câu hỏi đúng: <span type="radio" class="true_answer{{$name}}"></span></p>			<textarea  class="sub-answer-item"></textarea>		</div>		@endif	</div>	<div class="textcenter">		<button onclick="addMoreAnswer{{$name}}(this);return false;" class="btn btn-primary bgmain" type="button">Thêm dáp án</button>	</div>		</div><style type="text/css">	.group-answers{		margin-bottom: 10px;		    border: 1px solid #00923f;	}	.sub-answer-item{		width:100%;	}	.answer-item{    	padding: 8px 10px;    	position: relative;	}	.answer-item-trash{		position: absolute;	    right: 13px;	    background: #fff;	    font-size: 20px;	    bottom: 20px;	    cursor: pointer;	    color: #b70606;	}	.true_answer{{$name}}{	    border: 1px solid #ccc;	    width: 15px;	    height: 15px;	    display: inline-block;	    cursor: pointer;	}	.true_answer{{$name}}.active{		background: #00923f;	}</style><script type="text/javascript">	$(function() {		initTinymce();	});	function initTinymce(){		var tinys = $('.sub-answer-item');		for (var i = 0; i < tinys.length; i++) {			var item = $(tinys[i]);			if(item.attr("id")==undefined||item.attr("id")==""){				item.tinymce({					height: 150,			        theme: 'modern',			        plugins: [			          'advlist autolink lists link image charmap print preview hr anchor pagebreak',			          'searchreplace wordcount visualblocks visualchars code fullscreen',			          'insertdatetime media nonbreaking save table contextmenu directionality',			          'emoticons template paste textcolor colorpicker textpattern imagetools tech5sfilemanager formula'			        ],			        toolbar1:"newdocument code preview | undo redo | bold italic underline hr strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat subscript superscript",			        toolbar2:" fontsizeselect | link unlink anchor table | forecolor backcolor | nonbreaking charmap pastetext pagebreak | spellchecker visualblocks visualchars insertdatetime | fullscreen formula | tech5sfilemanager image media",			        document_base_url:'{{asset('/')}}',			        image_advtab: true,			        external_filemanager_path:'{{asset('/').$admincp}}'+'/media/view',			        filemanager_title:"File Manager" ,			        external_plugins: { "filemanager" : '{{asset('/')}}'+"public/plug/tinymce/plugins/tech5sfilemanager/plugin.min.js"}				});			}		}	}	function addMoreAnswer{{$name}}(_this){		var listitems = $(_this).parent().prev().find(".answer-item");		var tempItem = listitems.first();		var clone = tempItem.clone();		clone.find(".true_answerresult").removeClass('active');		clone.find("p strong span").text(listitems.length+1);		clone.append("<span onclick='removeAnswer{{$name}}(this);return false;' class='answer-item-trash fa fa-trash'></span>");		clone.find('.mce-panel').remove();		clone.find('textarea').attr('style','').attr("id","");		$(_this).parent().prev().append(clone);		reOrderAnswer{{$name}}();		toJson{{$name}}();		initTinymce();	}	function removeAnswer{{$name}}(_this){		$(_this).parent().remove();		reOrderAnswer{{$name}}();		toJson{{$name}}();		var count = $("input[name=answer_count]");		if(count.length>0){			count.val($(".group-answers{{$name}} .answer-item").length);		}	}	function reOrderAnswer{{$name}}(){		var groupitem = $(".group-answers{{$name}}");		var answers = groupitem.find(".answer-item");		for(var i=0;i<answers.length;i++){			$(answers[i]).find("p strong span").text(i+1);		}	}	$(function() {		$(document).on('click', '.true_answer{{$name}}', function(event) {			event.preventDefault();			$(".true_answer{{$name}}").removeClass('active');			$(this).addClass("active");			toJson{{$name}}();		});		$(document).on('input', '.sub-answer-item', function(event) {			event.preventDefault();			toJson{{$name}}();		});	});	function toJson{{$name}}(){		var groupitem = $(".group-answers{{$name}}");		var answers = groupitem.find(".answer-item");		var ret={};		var data=[];		var exact = -1;		for (var i = 0; i < answers.length; i++) {			var item = $(answers[i]);			data[i] = item.find("textarea").val();			if(item.find('.true_answer{{$name}}.active').length>0){				exact = i;			}					}		ret.exact = exact;		ret.data = data;		$("input[name={{$name}}]").val(JSON.stringify(ret));	}</script>